{"version":3,"file":"mint.js","sourceRoot":"","sources":["../../../src/instructions/mint.ts"],"names":[],"mappings":";;;AACA,4DAA8D;AAE9D,iDAAwE;AAExE,6CAAgD;AAEhD,4CAA0C;AAE1C;;;;GAIG;AACI,MAAM,0BAA0B,GAAG,KAAK,EAAE,EAC/C,QAAQ,EACR,MAAM,EACN,QAAQ,EACR,aAAa,GAAG,QAAQ,CAAC,MAAM,CAAC,SAAS,EACzC,eAAe,GAAG,IAAI,GAOvB,EAAgC,EAAE;IACjC,OAAO,IAAA,wBAAgB,EAAC;QACtB,QAAQ;QACR,MAAM;QACN,QAAQ;QACR,qBAAqB,EAAE,MAAM,iBAAQ,CAAC,8BAA8B,CAClE,QAAQ,CAAC,UAAU,CACpB;QACD,aAAa;QACb,eAAe;KAChB,CAAC,CAAC;AACL,CAAC,CAAC;AAvBW,QAAA,0BAA0B,8BAuBrC;AAEF;;;;GAIG;AACI,MAAM,gBAAgB,GAAG,CAAC,EAC/B,QAAQ,EACR,MAAM,EACN,QAAQ,EACR,qBAAqB,EACrB,aAAa,GAAG,QAAQ,CAAC,MAAM,CAAC,SAAS,EACzC,eAAe,GAAG,IAAI,GAQvB,EAAuB,EAAE;IACxB,MAAM,IAAI,GAAG,QAAQ,CAAC,MAAM,CAAC,SAAS,CAAC;IACvC,OAAO,IAAI,oCAAmB,CAC5B,QAAQ,EACR;QACE,uBAAa,CAAC,aAAa,CAAC;YAC1B,UAAU,EAAE,IAAI;YAChB,gBAAgB,EAAE,MAAM,CAAC,SAAS;YAClC,KAAK,EAAE,sBAAU,CAAC,IAAI;YACtB,QAAQ,EAAE,qBAAqB;YAC/B,SAAS,EAAE,4BAAgB;SAC5B,CAAC;QACF,iBAAQ,CAAC,yBAAyB,CAChC,4BAAgB,EAChB,MAAM,CAAC,SAAS,EAChB,QAAQ,EACR,aAAa,EACb,eAAe,CAChB;KACF,EACD,CAAC,MAAM,CAAC,CACT,CAAC;AACJ,CAAC,CAAC;AApCW,QAAA,gBAAgB,oBAoC3B;AAEK,MAAM,uBAAuB,GAAG,CAAC,EACtC,QAAQ,EACR,IAAI,EACJ,eAAe,EACf,EAAE,EACF,MAAM,GAOP,EAAuB,EAAE;IACxB,OAAO,IAAI,oCAAmB,CAC5B,QAAQ,EACR;QACE,iBAAQ,CAAC,uBAAuB,CAC9B,4BAAgB,EAChB,IAAI,EACJ,EAAE,EACF,eAAe,CAAC,SAAS,EACzB,EAAE,EACF,MAAM,CACP;KACF,EACD,CAAC,eAAe,CAAC,CAClB,CAAC;AACJ,CAAC,CAAC;AA3BW,QAAA,uBAAuB,2BA2BlC","sourcesContent":["import type { Provider } from \"@saberhq/solana-contrib\";\nimport { TransactionEnvelope } from \"@saberhq/solana-contrib\";\nimport type { u64 } from \"@solana/spl-token\";\nimport { Token as SPLToken, TOKEN_PROGRAM_ID } from \"@solana/spl-token\";\nimport type { PublicKey, Signer } from \"@solana/web3.js\";\nimport { SystemProgram } from \"@solana/web3.js\";\n\nimport { MintLayout } from \"../layout.js\";\n\n/**\n * Creates instructions for initializing a mint.\n * @param param0\n * @returns\n */\nexport const createInitMintInstructions = async ({\n  provider,\n  mintKP,\n  decimals,\n  mintAuthority = provider.wallet.publicKey,\n  freezeAuthority = null,\n}: {\n  provider: Provider;\n  mintKP: Signer;\n  decimals: number;\n  mintAuthority?: PublicKey;\n  freezeAuthority?: PublicKey | null;\n}): Promise<TransactionEnvelope> => {\n  return createInitMintTX({\n    provider,\n    mintKP,\n    decimals,\n    rentExemptMintBalance: await SPLToken.getMinBalanceRentForExemptMint(\n      provider.connection\n    ),\n    mintAuthority,\n    freezeAuthority,\n  });\n};\n\n/**\n * Creates instructions for initializing a mint.\n * @param param0\n * @returns\n */\nexport const createInitMintTX = ({\n  provider,\n  mintKP,\n  decimals,\n  rentExemptMintBalance,\n  mintAuthority = provider.wallet.publicKey,\n  freezeAuthority = null,\n}: {\n  provider: Provider;\n  mintKP: Signer;\n  decimals: number;\n  rentExemptMintBalance: number;\n  mintAuthority?: PublicKey;\n  freezeAuthority?: PublicKey | null;\n}): TransactionEnvelope => {\n  const from = provider.wallet.publicKey;\n  return new TransactionEnvelope(\n    provider,\n    [\n      SystemProgram.createAccount({\n        fromPubkey: from,\n        newAccountPubkey: mintKP.publicKey,\n        space: MintLayout.span,\n        lamports: rentExemptMintBalance,\n        programId: TOKEN_PROGRAM_ID,\n      }),\n      SPLToken.createInitMintInstruction(\n        TOKEN_PROGRAM_ID,\n        mintKP.publicKey,\n        decimals,\n        mintAuthority,\n        freezeAuthority\n      ),\n    ],\n    [mintKP]\n  );\n};\n\nexport const createMintToInstruction = ({\n  provider,\n  mint,\n  mintAuthorityKP,\n  to,\n  amount,\n}: {\n  provider: Provider;\n  mint: PublicKey;\n  mintAuthorityKP: Signer;\n  to: PublicKey;\n  amount: u64;\n}): TransactionEnvelope => {\n  return new TransactionEnvelope(\n    provider,\n    [\n      SPLToken.createMintToInstruction(\n        TOKEN_PROGRAM_ID,\n        mint,\n        to,\n        mintAuthorityKP.publicKey,\n        [],\n        amount\n      ),\n    ],\n    [mintAuthorityKP]\n  );\n};\n"]}